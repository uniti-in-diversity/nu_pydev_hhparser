#   Парсер hh.ru

Парсер вканасий на hh.ru используя API.

Принимает два параметра:

1) Город/регион поиска  - Вводить можно в любом регистре, присутствует внутренняя проверка правильности ввода города поиска.

2) Ключевая фраза - На основании фразы происходит поиск вакансий.

В качестве результата выводится:
- количество вакансий
- средняя ЗП по вакансиям где указана ЗП (берется верхнb1 показатель если указано от - до)
- ТОП 20 (либо меньше) навыков по частоте упоминания в вакансиях

##  Описание
В проекте используется два пользовательских интерфейса, веб-приложение и телеграмм бот.

   
#####  Телеграмм Бот
Телеграмм бот, написан на библиотеке ``python-telegram-bot``

/start - Приветствие, краткая информация

/help - Справка, как использовать бота.

/get_skills - Получения информации от парсера.
Необходимо отправить команду с указанием критериев поиска, 
через пробел написать город и ключевую фразу.
Например "/get_skills москва пайтон разработчик" (без кавычек) 

Прежде чем запустить бота, необходимо сделать настройки в файле config.json

    "PORT":"8282", #значение будет использовано из файла если запуск не на Heroku
    "WEBHOOK_URL":"https://hjs7ch23.ngrok.com/", #акутальный урл вебхука (это внешний адрес указывающий на запущенный сервер через обратного прокси, сервис туннелирования типа ngrok или Heroku)
    "TOKEN": "1087000896:AAH7nwyqoV3ESLy6ygxz-GmCwgQylv3ypjI"  #токен бота

где, 

   PORT - значение будет использовано из файла если запуск не на Heroku
   
   WEBHOOK_URL - акутальный урл вебхука (это внешний адрес указывающий на запущенный сервер через обратного прокси, сервис туннелирования типа ngrok или Heroku)
   
   TOKEN - токен бота

##### Веб-приложение

Веб приложение создано на Flask. 
На странице парсера необходимо заполнить форму, так же присутсвует проверка на корректность ввода города. 
Вывод результата на отдельной странице результата.

## Запуск

###Запуск в Docker

1) Клонировать ветку репозитария < >

   Структура каталогов
   
   app - вебприложение
   
   nginx - конфиги прокси

2) Скопировать ваши файлы сертификата SSL (сертификат и публичный ключ) в каталог с конфигурацией nginx, каталог ./nginx) 
   отредактировать путь к SSL сертфиикату в конфигурации вебприложения nginx, каталог ./nginx/conf.d/nu-site-parser.conf

       ssl_certificate /etc/nginx/cert.cer;
       ssl_certificate_key /etc/nginx/priv.key;
   (пути используются уже внутри контейнера) 

   либо можно переименовать свои файлы сертификатов и не редактировать пути.

3) Запускаем сборку

       docker-compose build --no-cache

4) Запускаем
       
       docker-compose up -d

Приложение будет доступно по HTTP, порт 8282 напрямую из контейнера с веб-приложением, либо по HTTPS через реверс прокси nginx.
